RewriteEngine On

# Remove www from URL (handles both http and https)
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Force HTTPS (only for non-www at this point)
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Disable automatic directory slash redirect
DirectorySlash Off

# Serve directory index.html without redirect (e.g., /quiz serves /quiz/index.html)
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_FILENAME}/index.html -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*)$ %{REQUEST_URI}/index.html [L]
